<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.7.5 Chrome/126.0.6478.183 Electron/31.3.0 Safari/537.36" version="24.7.5">
  <diagram name="lucene原理" id="keEPGWgsJUl2ciSjORj3">
    <mxGraphModel dx="2558" dy="1775" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="owNHDJ87eFbLBp3wyVCf-139" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-129" y="-331" width="603" height="484" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-137" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-632" y="-172" width="373" height="281" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-114" value="" style="rounded=0;whiteSpace=wrap;html=1;container=1;" vertex="1" parent="1">
          <mxGeometry x="-3" y="-290" width="350" height="288" as="geometry">
            <mxRectangle x="-3" y="-290" width="50" height="44" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-128" value="&lt;font style=&quot;font-size: 7px;&quot;&gt;每秒更新，写入commit point&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-114" source="owNHDJ87eFbLBp3wyVCf-115" target="owNHDJ87eFbLBp3wyVCf-116">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-115" value="内存缓存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry x="16" y="78" width="67" height="23" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-130" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-114" source="owNHDJ87eFbLBp3wyVCf-116" target="owNHDJ87eFbLBp3wyVCf-129">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-116" value="Segment File" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry x="13" y="142" width="197" height="21" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-120" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-114" source="owNHDJ87eFbLBp3wyVCf-119" target="owNHDJ87eFbLBp3wyVCf-115">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-121" value="写入内存缓存" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-120">
          <mxGeometry x="-0.2086" y="3" relative="1" as="geometry">
            <mxPoint x="-14" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-119" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry x="91" y="15" width="19" height="19" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-123" value="translog 日志文件" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry x="102" y="78" width="124" height="22" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-124" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.555;entryY=0.045;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-114" source="owNHDJ87eFbLBp3wyVCf-119" target="owNHDJ87eFbLBp3wyVCf-123">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="169" y="25" />
              <mxPoint x="169" y="56" />
              <mxPoint x="171" y="56" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-125" value="同时写入日志" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-124">
          <mxGeometry x="0.1142" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-129" value="OS Cache" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry x="60.75" y="191" width="101.5" height="24" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-133" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.787;entryY=-0.023;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-114" source="owNHDJ87eFbLBp3wyVCf-123" target="owNHDJ87eFbLBp3wyVCf-116">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-134" value="&lt;font style=&quot;font-size: 8px;&quot;&gt;每30分钟刷新一次&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-133">
          <mxGeometry x="-0.3655" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-117" value="Disk&lt;div&gt;translog&lt;/div&gt;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#60a917;fontColor=#ffffff;strokeColor=#2D7600;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry x="267" y="118.5" width="71" height="59.5" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-126" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-114" source="owNHDJ87eFbLBp3wyVCf-123" target="owNHDJ87eFbLBp3wyVCf-117">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-127" value="刷新到日志文件" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-126">
          <mxGeometry x="-0.101" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-118" value="Disk&lt;div&gt;segment file&lt;/div&gt;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#60a917;fontColor=#ffffff;strokeColor=#2D7600;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry x="252" y="211" width="84" height="57" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-131" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-114" source="owNHDJ87eFbLBp3wyVCf-129" target="owNHDJ87eFbLBp3wyVCf-118">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="112" y="258" />
              <mxPoint x="178" y="258" />
              <mxPoint x="178" y="240" />
              <mxPoint x="252" y="240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-132" value="fsync" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-131">
          <mxGeometry x="-0.6107" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-135" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-114" source="owNHDJ87eFbLBp3wyVCf-116" target="owNHDJ87eFbLBp3wyVCf-116">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-136" value="定期合并" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-135">
          <mxGeometry x="0.0664" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-103" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-102" target="owNHDJ87eFbLBp3wyVCf-95">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-105" value="1、发出写入请求" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-103">
          <mxGeometry x="-0.5295" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-65" value="内存中" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="-72" y="237" width="170" height="310" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-64" value="磁盘上" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="138" y="237" width="320" height="320" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-26" value="Term Index" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-42" y="277" width="120" height="240" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-27" value="Term Dictionary" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#5fa1ee;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="148" y="277" width="120" height="240" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-67" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-28" target="owNHDJ87eFbLBp3wyVCf-66">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-28" value="Postings List" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=#5fa1ee;fontColor=#ffffff;strokeColor=#001DBC;" vertex="1" parent="1">
          <mxGeometry x="308" y="277" width="120" height="240" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-37" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-29" target="owNHDJ87eFbLBp3wyVCf-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-45" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-29" target="owNHDJ87eFbLBp3wyVCf-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-29" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="13" y="327" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-38" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-31" target="owNHDJ87eFbLBp3wyVCf-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;dashed=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-31" target="owNHDJ87eFbLBp3wyVCf-47">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="18" y="367" />
              <mxPoint x="86" y="367" />
              <mxPoint x="86" y="327" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-31" value="L" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="13" y="347" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-39" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-32" target="owNHDJ87eFbLBp3wyVCf-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-32" value="U" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="-7" y="367" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-40" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-33" target="owNHDJ87eFbLBp3wyVCf-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-53" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-33" target="owNHDJ87eFbLBp3wyVCf-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-33" value="C" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="3" y="392" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-41" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-34" target="owNHDJ87eFbLBp3wyVCf-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-34" value="E" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="-32" y="417" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-35" value="N" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="3" y="437" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;dashed=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-36" target="owNHDJ87eFbLBp3wyVCf-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-36" value="E" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="13" y="457" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-42" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.175;entryY=0.55;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-35" target="owNHDJ87eFbLBp3wyVCf-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-43" value="M" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="-22" y="347" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-44" value="N" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="48" y="347" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-46" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.675;entryY=0.075;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-29" target="owNHDJ87eFbLBp3wyVCf-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-60" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-47" target="owNHDJ87eFbLBp3wyVCf-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-47" value="Li" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="173" y="317" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-48" target="owNHDJ87eFbLBp3wyVCf-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-48" value="Lucy" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="173" y="357" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-49" value="Luncene" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="173" y="402" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-52" value="Y" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="38" y="412" width="10" height="10" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.004;entryY=0.407;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;dashed=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-52" target="owNHDJ87eFbLBp3wyVCf-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-55" value="[1,2,3,4,6,11]" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="318" y="314.5" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-56" value="[1,3,45,23,123]" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="318" y="354.5" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-57" value="[2,43,23423,2345]" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="318" y="399.5" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-58" target="owNHDJ87eFbLBp3wyVCf-59">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-58" value="..." style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="173" y="447" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-59" value="..." style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="318" y="444.5" width="100" height="25" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.03;entryY=0.463;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-49" target="owNHDJ87eFbLBp3wyVCf-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-66" value="&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/div&gt;优化：&lt;div style=&quot;font-size: 10px;&quot;&gt;1、FOR:存储压缩（保存为相比前一个文档id的增量，大数变小数）&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;2、block分区&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;3、&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(33, 37, 41); font-family: system-ui, -apple-system, &amp;quot;Segoe UI&amp;quot;, Roboto, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;Noto Sans&amp;quot;, &amp;quot;Liberation Sans&amp;quot;, Arial, sans-serif, &amp;quot;Apple Color Emoji&amp;quot;, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;, &amp;quot;Noto Color Emoji&amp;quot;; font-size: 10px; font-weight: bolder;&quot;&gt;roaring bitmap：用于filter cache&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;verticalAlign=top;rounded=1;fontSize=10;align=left;" vertex="1" parent="1">
          <mxGeometry x="273" y="617" width="223" height="160" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-68" value="&lt;font style=&quot;font-size: 11px;&quot;&gt;联合查询技术&lt;/font&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font style=&quot;font-size: 11px;&quot;&gt;（多个条件的结果，取交集、并集）&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;1：使用skip list，对多个list求交集&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;2、结合Postings list的FOR压缩，可以跳过不需要的解压&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="-102" y="647" width="320" height="110" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-107" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-95" target="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-22" y="-74" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-183" y="-113" />
              <mxPoint x="-183" y="-268" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-108" value="2、路由到对应的主分片" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-107">
          <mxGeometry x="-0.2765" relative="1" as="geometry">
            <mxPoint x="3" y="-40" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-146" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-95" target="owNHDJ87eFbLBp3wyVCf-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-147" value="7.1 返回写入结果" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-146">
          <mxGeometry x="0.1151" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-95" value="主分片" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-532" y="-153" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-109" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-114" target="owNHDJ87eFbLBp3wyVCf-99">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="9.645451438183954" y="-38.74839908530953" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-110" value="4.1写入副本" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-109">
          <mxGeometry x="-0.0152" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-111" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-114" target="owNHDJ87eFbLBp3wyVCf-100">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="62.368307963182815" y="-37.44753805522555" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-112" value="4.1 写入分配" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-111">
          <mxGeometry x="-0.3605" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-97" value="副本分片" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-608" y="-62" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-98" value="副本分片" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-460" y="-59" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-140" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;entryX=0.365;entryY=1.004;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-99" target="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="22" y="63" />
              <mxPoint x="22" y="61" />
              <mxPoint x="125" y="61" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-141" value="4.2 返回写入成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-140">
          <mxGeometry x="-0.1917" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-99" value="" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-117" y="61" width="58" height="25" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.569;entryY=1.005;entryDx=0;entryDy=0;curved=1;exitX=0.026;exitY=0.658;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-100" target="owNHDJ87eFbLBp3wyVCf-114">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="247" y="93" />
              <mxPoint x="247" y="25" />
              <mxPoint x="196" y="25" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-143" value="4.2 返回写入成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-142">
          <mxGeometry x="0.2004" y="-65" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-100" value="" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="367" y="69" width="51" height="36" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-104" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="-746" y="-363" width="122" height="151" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-102" value="" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-104">
          <mxGeometry width="122" height="151" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-101" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-104">
          <mxGeometry x="45" y="40" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.919;entryY=0.797;entryDx=0;entryDy=0;entryPerimeter=0;curved=1;" edge="1" parent="1" source="owNHDJ87eFbLBp3wyVCf-114" target="owNHDJ87eFbLBp3wyVCf-95">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-77" y="-268" />
              <mxPoint x="-77" y="-89" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-145" value="6.1 返回结果" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-144">
          <mxGeometry x="-0.5808" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-148" value="写入流程" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=33;" vertex="1" parent="1">
          <mxGeometry x="-463" y="-407" width="286" height="94" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-149" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="730" y="-346" width="610" height="395" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-11" value="Shard" style="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-149">
          <mxGeometry width="610" height="395" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-12" value="Segment&lt;div&gt;保存最多2^31个文档&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-149">
          <mxGeometry x="10" y="155" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-149" source="owNHDJ87eFbLBp3wyVCf-14" target="owNHDJ87eFbLBp3wyVCf-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-20" value="定期合并" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-18">
          <mxGeometry x="-0.14" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-14" value="Segment" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-149">
          <mxGeometry x="220" y="155" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-15" value="。。。" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-149">
          <mxGeometry x="10" y="235" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="owNHDJ87eFbLBp3wyVCf-149" source="owNHDJ87eFbLBp3wyVCf-16" target="owNHDJ87eFbLBp3wyVCf-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-21" value="定期合并" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="owNHDJ87eFbLBp3wyVCf-19">
          <mxGeometry x="-0.0405" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-16" value="Segment" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-149">
          <mxGeometry x="350" y="155" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="owNHDJ87eFbLBp3wyVCf-17" value="Segment" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="owNHDJ87eFbLBp3wyVCf-149">
          <mxGeometry x="280" y="255" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
